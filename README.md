# calculator-zhuravlev-da


## Что было сделано?  
Реализован калькулятор для вычисления арифметических выражений с поддержкой целых и вещественных чисел.  
- **Операции**: `+`, `-`, `*`, `/`,  `()`  
- **Режимы**:  
  - Целочисленный (деление округляется к нулю).  
  - Вещественный (флаг `--float`, точность ±10⁻⁴).  
- **Валидация**: Проверка символов, структуры выражения, баланса скобок.  
- **Тестирование**: Модульные тесты (GoogleTest) для проверки парсинга, вычислений и обработки ошибок.  

## Как запустить?  
### Сборка  
- `make all` — сборка программы (`app`) и тестов (`unit-tests`).  
- `make clean` — удаление сгенерированных файлов.  

### Использование  

- **Целочисленный режим**:  
  ```bash  
  make run-int  
  ```  
- **Вещественный режим**:  
  ```bash  
  make run-float  
  ```  
1. Введите выражение, нажмите Enter.
2. Нажмите `Ctrl+D` для завершения ввода.  
### Тесты  
- `make run-unit-test` — запуск модульных тестов.  

## Как это сделано?  
### Архитектура  
- **main.c**: Чтение ввода, обработка флага, вывод результата.  
- **calculator.c**:  
  - *Токенизация*: Разбивка строки на числа и операторы.  
  - *RPN*: Алгоритм сортировочной станции для преобразования в обратную польскую запись.  
  - *Стековая машина*: Вычисление результата с контролем ошибок (деление на значения <1e-4).  

### Инструменты  
- **Makefile**:  
  - Автоматизация сборки, тестирования и очистки.  
  - Форматирование кода через `clang-format` (стиль WebKit).  
- **GoogleTest**: Проверка корректности парсинга, валидации и вычислений.  

### Особенности  
- Переключение режимов через флаг `--float` без дублирования логики.  
- Валидация символов и структуры до начала вычислений.  
- Нет внешних зависимостей, кроме стандартной библиотеки C.